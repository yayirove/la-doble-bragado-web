---
const { title = "La Doble Bragado", children } = Astro.props;
---

<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- GLOBAL CSS -->
    <link rel="stylesheet" href="/styles/global.css" />
    <title>{title}</title>
    <!-- Tipografías -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://use.typekit.net/dgy8exd.css"
    />
  </head>

  <body>
    <main>
      <slot />
    </main>

    <!-- Scripts de funcionalidad general -->
    <script src="/js/contador.js" defer></script>
    <script src="/js/parallax-hero.js" defer></script>
    <script src="/js/rellax.min.js" defer></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        new Rellax(".rellax");
      });

      // Si tienes una barra con clase .barra-navegacion, la ocultamos al hacer scroll.
      const nav = document.querySelector(".barra-navegacion");
      if (nav) {
        let lastScroll = 0;
        window.addEventListener("scroll", () => {
          const currentScroll = window.pageYOffset;
          if (currentScroll > lastScroll && currentScroll > 60) {
            nav.style.transform = "translateY(-100%)";
          } else {
            nav.style.transform = "translateY(0)";
          }
          lastScroll = currentScroll;
        });
      }
    </script>

    <!-- Modal de contacto principal (coincide con modal-ldb.js) -->
    <div id="modalLDB" class="modal-ldb">
      <div class="modal-ldb-content">
        <span
          id="modalLDBClose"
          class="modal-ldb-close"
          aria-label="Cerrar"
          >&times;</span
        >
        <h2>Contáctanos</h2>
        <form
          name="modal-contacto"
          method="POST"
          data-netlify="true"
          netlify-honeypot="bot-field"
        >
          <input type="hidden" name="form-name" value="modal-contacto" />
          <p style="display: none;">
            <label
              >No completar si sos humano: <input name="bot-field" /></label
            >
          </p>

          <label for="nombre">Nombre</label>
          <input type="text" name="nombre" id="nombre" required />

          <label for="email">Email</label>
          <input type="email" name="email" id="email" required />

          <label for="mensaje">Mensaje</label>
          <textarea
            name="mensaje"
            id="mensaje"
            rows="5"
            required
          ></textarea>

          <button type="submit">Enviar</button>
        </form>
      </div>
    </div>

    <!-- Modal de agradecimiento -->
    <div class="modal-ldb" id="modalGracias">
      <div class="modal-ldb-content">
        <span
          class="modal-ldb-close"
          id="modalGraciasClose"
          aria-label="Cerrar"
          >&times;</span
        >
        <h2>¡Gracias por escribirnos!</h2>
        <p>Pronto nos pondremos en contacto con vos.</p>
        <button id="modalGraciasBtn">Cerrar</button>
      </div>
    </div>

    <!-- Script que abre/cierra el modal principal -->
    <script src="/js/modal-ldb.js" defer></script>
  </body>
</html>
